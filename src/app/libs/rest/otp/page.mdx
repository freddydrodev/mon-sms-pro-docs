---
sidebarTitle: OTP üîê
title: Gestion des OTP | API REST Mon SMS PRO
description: Guide complet pour g√©rer les mots de passe √† usage unique (OTP) avec notre API REST. S√©curisez vos applications avec des codes de v√©rification par SMS.
keywords: OTP SMS, API REST OTP, v√©rification SMS, API SMS, endpoints OTP, s√©curit√© SMS, codes de v√©rification
---

import { Callout, Table } from "nextra/components";
import SwaggerUI from "@/components/SwaggerUI";

# Gestion des OTP

Les OTP (One-Time Password) sont des codes de v√©rification √† usage unique envoy√©s par SMS. Notre API REST vous permet d'impl√©menter facilement une authentification √† deux facteurs (2FA) ou une v√©rification de num√©ro de t√©l√©phone.

## Fonctionnalit√©s

- Envoi de codes OTP
- V√©rification de codes
- Personnalisation des messages
- Gestion des expirations
- S√©curit√© renforc√©e
- Suivi des tentatives

## Utilisation

Apr√®s avoir [initialis√©](/libs/rest/get-started/#init) votre API, vous pouvez utiliser les endpoints suivants pour g√©rer vos OTP.

### Envoi d'un code OTP

```bash
POST /v1/auth/otp/get
Content-Type: application/json

{
  "apiKey": "YOUR_API_KEY",      // Required
  "phoneNumber": "+2250708517414", // Required: Include country code with +
  "length": 10,                  // Optional: Length of the OTP code
  "mode": "ALPHA_NUMERIC",       // Optional: "NUMERIC" | "ALPHABET" | "ALPHA_NUMERIC"
  "senderId": "Boss",            // Optional: Custom sender ID
  "appName": "My APP"            // Optional: Application name
}
```

#### R√©ponse

```json
{
  "success": true,
  "data": {
    "token": "6828f2299df4397112837d20",
    "status": "PENDING",
    "phoneNumber": "2250708517414"
  },
  "error": null
}
```

### V√©rification d'un code OTP

```bash
POST /v1/auth/otp/verify
Content-Type: application/json

{
  "apiKey": "YOUR_API_KEY",      // Required
  "phoneNumber": "2250708517414", // Required: Include country code without +
  "token": "6828f2299df4397112837d20", // Required: Token received from OTP generation
  "otp": "5ZAEZ0Z8G5A"           // Required: OTP code to verify
}
```

#### R√©ponse

```json
{
  "success": true,
  "data": {
    "token": "6828f2299df4397112837d20",
    "status": "VERIFIED",
    "phoneNumber": "2250708517414"
  },
  "error": null
}
```

<Callout type="info">
  Toutes les r√©ponses de l'API suivent le format standard : `{ success: boolean, data: any, error: any }`.
  Le champ `data` contient les donn√©es de la r√©ponse, tandis que `error` contient les d√©tails en cas d'erreur.
</Callout>

## Documentation de l'API

### POST /v1/auth/otp/get

Envoie un code OTP au num√©ro de t√©l√©phone sp√©cifi√©.

<Table style={{ marginTop: 20 }}>
  <thead>
    <Table.Tr>
      <Table.Th>Nom</Table.Th>
      <Table.Th>Description</Table.Th>
      <Table.Th>Type</Table.Th>
      <Table.Th>Facultatif</Table.Th>
      <Table.Th>Valeur par d√©faut</Table.Th>
    </Table.Tr>
  </thead>
  <tbody>
    <Table.Tr>
      <Table.Td>apiKey</Table.Td>
      <Table.Td>Cl√© API</Table.Td>
      <Table.Td>String</Table.Td>
      <Table.Td>Non</Table.Td>
      <Table.Td>-</Table.Td>
    </Table.Tr>
    <Table.Tr>
      <Table.Td>phoneNumber</Table.Td>
      <Table.Td>Num√©ro de t√©l√©phone avec indicatif pays</Table.Td>
      <Table.Td>String</Table.Td>
      <Table.Td>Non</Table.Td>
      <Table.Td>-</Table.Td>
    </Table.Tr>
    <Table.Tr>
      <Table.Td>length</Table.Td>
      <Table.Td>Longueur du code OTP</Table.Td>
      <Table.Td>Number</Table.Td>
      <Table.Td>Oui</Table.Td>
      <Table.Td>4</Table.Td>
    </Table.Tr>
    <Table.Tr>
      <Table.Td>mode</Table.Td>
      <Table.Td>Mode du code OTP</Table.Td>
      <Table.Td>"NUMERIC" | "ALPHABET" | "ALPHA_NUMERIC"</Table.Td>
      <Table.Td>Oui</Table.Td>
      <Table.Td>NUMERIC</Table.Td>
    </Table.Tr>
    <Table.Tr>
      <Table.Td>senderId</Table.Td>
      <Table.Td>
        Identifiant de l'exp√©diteur (Doit √™tre enregistr√© et actif)
      </Table.Td>
      <Table.Td>String</Table.Td>
      <Table.Td>Oui</Table.Td>
      <Table.Td>MONSMSPRO</Table.Td>
    </Table.Tr>
    <Table.Tr>
      <Table.Td>appName</Table.Td>
      <Table.Td>Nom de l'application</Table.Td>
      <Table.Td>String</Table.Td>
      <Table.Td>Oui</Table.Td>
      <Table.Td>null</Table.Td>
    </Table.Tr>
  </tbody>
</Table>

<Callout type="warning" emoji="‚ö†Ô∏è">
  Important : Incluez l'indicatif du pays sans le symbole **(+)** avant le
  num√©ro de t√©l√©phone. Exemple : "2250708517414" pour un num√©ro ivoirien.
</Callout>

### POST /v1/auth/otp/verify

V√©rifie un code OTP pour un num√©ro de t√©l√©phone.

<Table style={{ marginTop: 20 }}>
  <thead>
    <Table.Tr>
      <Table.Th>Nom</Table.Th>
      <Table.Th>Description</Table.Th>
      <Table.Th>Type</Table.Th>
      <Table.Th>Facultatif</Table.Th>
      <Table.Th>Valeur par d√©faut</Table.Th>
    </Table.Tr>
  </thead>
  <tbody>
    <Table.Tr>
      <Table.Td>apiKey</Table.Td>
      <Table.Td>Cl√© API</Table.Td>
      <Table.Td>String</Table.Td>
      <Table.Td>Non</Table.Td>
      <Table.Td>-</Table.Td>
    </Table.Tr>
    <Table.Tr>
      <Table.Td>phoneNumber</Table.Td>
      <Table.Td>Num√©ro de t√©l√©phone avec indicatif pays</Table.Td>
      <Table.Td>String</Table.Td>
      <Table.Td>Non</Table.Td>
      <Table.Td>-</Table.Td>
    </Table.Tr>
    <Table.Tr>
      <Table.Td>token</Table.Td>
      <Table.Td>Token re√ßu lors de la g√©n√©ration de l'OTP</Table.Td>
      <Table.Td>String</Table.Td>
      <Table.Td>Non</Table.Td>
      <Table.Td>-</Table.Td>
    </Table.Tr>
    <Table.Tr>
      <Table.Td>otp</Table.Td>
      <Table.Td>Code OTP √† v√©rifier</Table.Td>
      <Table.Td>String</Table.Td>
      <Table.Td>Non</Table.Td>
      <Table.Td>-</Table.Td>
    </Table.Tr>
  </tbody>
</Table>

### Exemple d'erreur

```json
{
  "success": false,
  "data": null,
  "error": "wrong-otp"
}
```

## Bonnes pratiques

1. **Longueur du code** : Utilisez des codes de 4-10 caract√®res pour un bon √©quilibre s√©curit√©/confort
2. **Mode** : Choisissez le mode appropri√© selon vos besoins de s√©curit√©
3. **Exp√©diteur** : Utilisez un senderId reconnu pour une meilleure d√©livrabilit√©
4. **Tentatives** : Limitez le nombre de tentatives de v√©rification
5. **S√©curit√©** : Utilisez HTTPS pour toutes les requ√™tes
6. **Stockage** : Ne stockez jamais les codes en clair
7. **Monitoring** : Surveillez les tentatives de fraude

## Cas d'utilisation

- Authentification √† deux facteurs (2FA)
- V√©rification de num√©ro de t√©l√©phone
- R√©initialisation de mot de passe
- Confirmation de transactions
- Inscription de compte
- Changement de param√®tres sensibles
- Acc√®s √† des fonctionnalit√©s s√©curis√©es

## FAQ

### Comment envoyer un code OTP ?

Utilisez l'endpoint `/v1/auth/otp/get` avec le num√©ro de t√©l√©phone et les param√®tres requis.

### Quels modes de code sont disponibles ?

Trois modes sont disponibles : "NUMERIC" (chiffres uniquement), "ALPHABET" (lettres uniquement), et "ALPHA_NUMERIC" (chiffres et lettres).

### Comment v√©rifier un code OTP ?

Utilisez l'endpoint `/v1/auth/otp/verify` avec le num√©ro de t√©l√©phone et le code √† v√©rifier.

### Combien de tentatives sont autoris√©es ?

Le nombre de tentatives est limit√© pour des raisons de s√©curit√©. Contactez-nous pour plus d'informations.

### Puis-je r√©utiliser un code OTP ?

Non, chaque code OTP est √† usage unique et ne peut √™tre utilis√© qu'une seule fois.

### Comment personnaliser l'exp√©diteur ?

Utilisez le param√®tre `senderId` pour sp√©cifier un exp√©diteur personnalis√©.

## R√©f√©rence API Interactive

<SwaggerUI
  spec={{
    openapi: "3.0.0",
    info: {
      title: "API OTP",
      version: "1.0.0",
      description:
        "Gestion des OTP - Envoi et v√©rification de codes de s√©curit√© par SMS",
    },
    servers: [
      {
        url: "https://rest.monsms.pro/v1",
        description: "Serveur de production",
      },
    ],
    paths: {
      "/auth/otp/get": {
        post: {
          summary: "Envoyer un code OTP",
          description: "Envoie un code OTP au num√©ro de t√©l√©phone sp√©cifi√©",
          requestBody: {
            required: true,
            content: {
              "application/json": {
                schema: {
                  type: "object",
                  properties: {
                    apiKey: {
                      type: "string",
                      description: "Cl√© API d'authentification",
                    },
                    phoneNumber: {
                      type: "string",
                      description:
                        "Num√©ro de t√©l√©phone avec indicatif pays (avec +)",
                    },
                    length: {
                      type: "number",
                      default: 4,
                      description: "Longueur du code OTP",
                    },
                    mode: {
                      type: "string",
                      enum: ["NUMERIC", "ALPHABET", "ALPHA_NUMERIC"],
                      default: "NUMERIC",
                      description: "Mode du code OTP",
                    },
                    senderId: {
                      type: "string",
                      default: "MONSMSPRO",
                      description:
                        "Identifiant de l'exp√©diteur (doit √™tre enregistr√© et actif)",
                    },
                    appName: {
                      type: "string",
                      description: "Nom de l'application",
                    },
                  },
                  required: ["apiKey", "phoneNumber"],
                },
                examples: {
                  "OTP simple": {
                    value: {
                      apiKey: "YOUR_API_KEY",
                      phoneNumber: "+2250708517414",
                    },
                  },
                  "OTP personnalis√©": {
                    value: {
                      apiKey: "YOUR_API_KEY",
                      phoneNumber: "+2250708517414",
                      length: 10,
                      mode: "ALPHA_NUMERIC",
                      senderId: "Boss",
                      appName: "My APP",
                    },
                  },
                },
              },
            },
          },
          responses: {
            "200": {
              description: "OTP envoy√© avec succ√®s",
              content: {
                "application/json": {
                  schema: {
                    type: "object",
                    properties: {
                      success: {
                        type: "boolean",
                      },
                      data: {
                        type: "object",
                        properties: {
                          token: {
                            type: "string",
                            description: "Token pour la v√©rification",
                          },
                          status: {
                            type: "string",
                            enum: ["PENDING"],
                          },
                          phoneNumber: {
                            type: "string",
                            description: "Num√©ro de t√©l√©phone (sans +)",
                          },
                        },
                      },
                      error: {
                        type: "object",
                        nullable: true,
                      },
                    },
                  },
                  examples: {
                    "R√©ponse succ√®s": {
                      value: {
                        success: true,
                        data: {
                          token: "6828f2299df4397112837d20",
                          status: "PENDING",
                          phoneNumber: "2250708517414",
                        },
                        error: null,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
      "/auth/otp/verify": {
        post: {
          summary: "V√©rifier un code OTP",
          description: "V√©rifie un code OTP pour un num√©ro de t√©l√©phone",
          requestBody: {
            required: true,
            content: {
              "application/json": {
                schema: {
                  type: "object",
                  properties: {
                    apiKey: {
                      type: "string",
                      description: "Cl√© API d'authentification",
                    },
                    phoneNumber: {
                      type: "string",
                      description:
                        "Num√©ro de t√©l√©phone avec indicatif pays (sans +)",
                    },
                    token: {
                      type: "string",
                      description: "Token re√ßu lors de la g√©n√©ration de l'OTP",
                    },
                    otp: {
                      type: "string",
                      description: "Code OTP √† v√©rifier",
                    },
                  },
                  required: ["apiKey", "phoneNumber", "token", "otp"],
                },
                examples: {
                  "V√©rification OTP": {
                    value: {
                      apiKey: "YOUR_API_KEY",
                      phoneNumber: "2250708517414",
                      token: "6828f2299df4397112837d20",
                      otp: "5ZAEZ0Z8G5A",
                    },
                  },
                },
              },
            },
          },
          responses: {
            "200": {
              description: "OTP v√©rifi√© avec succ√®s",
              content: {
                "application/json": {
                  schema: {
                    type: "object",
                    properties: {
                      success: {
                        type: "boolean",
                      },
                      data: {
                        type: "object",
                        properties: {
                          token: {
                            type: "string",
                            description: "Token de l'OTP",
                          },
                          status: {
                            type: "string",
                            enum: ["VERIFIED"],
                          },
                          phoneNumber: {
                            type: "string",
                            description: "Num√©ro de t√©l√©phone v√©rifi√©",
                          },
                        },
                      },
                      error: {
                        type: "object",
                        nullable: true,
                      },
                    },
                  },
                  examples: {
                    "V√©rification r√©ussie": {
                      value: {
                        success: true,
                        data: {
                          token: "6828f2299df4397112837d20",
                          status: "VERIFIED",
                          phoneNumber: "2250708517414",
                        },
                        error: null,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    },
  }}
/>
